import{r as n,j as s}from"./index-B5mQ3kpn.js";import{D as U,g as c,a as ee,b as se,c as u,L as te,s as ae}from"./apiConstants-CECpY-gN.js";import{u as ne}from"./index-DoeqYNU0.js";const re=()=>{const A=ne(),m=50,[i,C]=n.useState([]),[x,j]=n.useState(!1),[v,R]=n.useState(""),[f,o]=n.useState(i),[T,w]=n.useState([]),[E,H]=n.useState([]),[k,F]=n.useState([]),[M,I]=n.useState(""),[O,z]=n.useState(""),[B,G]=n.useState(""),[P,K]=n.useState(1),[Z,$]=n.useState(!0),q=e=>{R(e.target.value)},D=e=>{const t=e.target.value;if(I(t),t==="All")o(i);else{const a=i.filter(l=>l.types.includes(t));o(a)}},J=e=>{const t=e.target.value;if(z(t),t==="All")o(i);else{const a=i.filter(l=>l.region.includes(t));o(a)}},Q=e=>{const t=e.target.value;if(G(t),t==="All")o(i);else{const a=i.filter(l=>l.habitat.includes(t));o(a)}},V=e=>{const t=e==null?void 0:e.split("/"),a=t[t.length-2];A(`/pokemon/${a}`)},W=()=>{K(e=>e+1)};return n.useEffect(()=>{if(v==="")o(i);else{const e=i.filter(t=>t.name.toLowerCase().includes(v.toLowerCase()));o(e)}},[v,i]),n.useEffect(()=>{async function e(){try{j(!0);const t=await u.get(te,{params:{limit:m,offset:(P-1)*m}}),{results:a}=t.data,l=[],r=[],L=new Set,y=await Promise.all(a==null?void 0:a.map(async d=>{const b=await u.get(d.url),N=await u.get(b.data.species.url),{sprites:X,types:h}=b.data,_=h==null?void 0:h.map(g=>g.type.name);_.forEach(g=>{h.includes(g)||L.add(g)});const p=N.data.habitat.name;l.includes(p)||l.push(p);const Y=N.data.generation.url,S=(await u.get(Y)).data.main_region.name;return r.includes(S)||r.push(S),{...d,image:X.front_default,types:_,habitat:p,region:S}}));C(d=>[...d,...y]),j(!1),w(l),H(Array.from(L)),F(r),$(y.length===m)}catch{j(!1),ae("Server Error. Please Try Again")}}e()},[P]),s.jsxs("div",{className:"pokemon-lists__container",children:[x?s.jsx("div",{className:"custom-loader",children:s.jsx(U,{color:"#6750a4",loading:x,size:100,"aria-label":"Loading...","data-testid":"loader"})}):s.jsxs("div",{children:[s.jsxs("div",{className:"header-section",children:[s.jsx("div",{className:"section-search",children:s.jsx("input",{placeholder:"Search Pokemon...",onChange:e=>q(e)})}),s.jsxs("div",{className:"section-filter",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"typeSelect",children:"Select Type "}),s.jsxs("select",{onChange:D,value:M,children:[s.jsx("option",{value:"All",children:"All"}),E.map((e,t)=>s.jsx("option",{value:e,children:c(e)},t))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"typeSelect",children:"Select Region "}),s.jsxs("select",{onChange:J,value:O,children:[s.jsx("option",{value:"All",children:"All"}),k.map((e,t)=>s.jsx("option",{value:e,children:c(e)},t))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"typeSelect",children:"Select Habitat "}),s.jsxs("select",{onChange:Q,value:B,children:[s.jsx("option",{value:"All",children:"All"}),T.map((e,t)=>s.jsx("option",{value:e,children:c(e)},t))]})]})]})]}),s.jsx("div",{className:"container__all-lists",children:f==null?void 0:f.map((e,t)=>{var a;return s.jsxs("div",{className:"all-lists__pokemon-detail",onClick:()=>V(e==null?void 0:e.url),children:[s.jsx("img",{src:e==null?void 0:e.image,className:"pokemon-detail__pokemon-img"}),s.jsx("h5",{children:c(e.name)}),s.jsx("div",{className:"pokemon-detail__types",children:(a=e==null?void 0:e.types)==null?void 0:a.map((l,r)=>s.jsxs("div",{className:"types__single-type",style:{backgroundColor:ee(l)},children:[s.jsx("img",{src:se(l)}),s.jsx("p",{children:c(l)})]},r))}),s.jsxs("div",{className:"pokemon-region-kanto",children:[s.jsx("div",{children:s.jsxs("p",{children:["Region: ",c(e==null?void 0:e.region)]})}),s.jsx("div",{children:s.jsxs("p",{children:["Habitat: ",c(e==null?void 0:e.habitat)]})})]})]},t)})})]}),Z&&!x&&s.jsx("div",{className:"load-more-btn-section",children:s.jsx("button",{onClick:W,children:"Load More"})})]})};export{re as default};
